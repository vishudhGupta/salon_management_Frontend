<div *ngIf="userData" class="dashboard-container d-flex">
  <!-- Sidebar -->
  <aside class="sidebar p-4">
    <div class="text-center mb-4">
      <img src="https://via.placeholder.com/100x100.png?text={{ userData.name[0] }}" class="profile-img mb-2" />
      <h5>{{ userData.name }}</h5>
    </div>
    <ul class="nav flex-column gap-3">
      <li class="nav-item"><i class="bi bi-house-door"></i> Dashboard</li>
      <li class="nav-item"><i class="bi bi-calendar"></i> Appointments</li>
      <li class="nav-item"><i class="bi bi-heart"></i> Favorites</li>
      <li class="nav-item"><i class="bi bi-gear"></i> Settings</li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main class="main-content p-4 w-100">
    <h3 class="fw-bold mb-4">User Dashboard</h3>

    <!-- Stats Cards -->
    <div class="row mb-4">
      <div class="col-md-4" *ngFor="let stat of ['Upcoming', 'Completed', 'Canceled']; let i = index">
        <div class="stat-card">
          <div class="icon-box"><i class="bi" [ngClass]="['bi-calendar-event', 'bi-check2-circle', 'bi-x-lg'][i]"></i></div>
          <div>
            <h4>
              {{
                i === 0
                  ? upcomingAppointments.length
                  : i === 1
                  ? completedAppointments.length
                  : canceledAppointments.length
              }}
            </h4>
            <p>{{ stat }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Appointments Section -->
    <div class="row">
      <div class="col-md-8">
        <!-- Upcoming Appointments -->
        <div class="mb-4">
          <div class="d-flex justify-content-between align-items-center">
            <h5>Upcoming Appointments</h5>
            <a href="#">View All</a>
          </div>
          <table class="table table-bordered table-light" *ngIf="upcomingAppointments.length">
            <thead>
              <tr><th>Date</th><th>Time</th><th>Service</th></tr>
            </thead>
            <tbody>
              <tr *ngFor="let a of upcomingAppointments">
                <td>{{ a.appointment_date | date:'mediumDate' }}</td>
                <td>{{ a.appointment_time }}</td>
                <td>{{ a.service.name }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Recent Appointments -->
        <div>
          <div class="d-flex justify-content-between align-items-center">
            <h5>Recent Appointments</h5>
            <a href="#">View All</a>
          </div>
          <table class="table table-bordered table-light" *ngIf="recentAppointments.length">
            <thead>
              <tr><th>Date</th><th>Service</th><th>Status</th></tr>
            </thead>
            <tbody>
              <tr *ngFor="let a of recentAppointments">
                <td>{{ a.appointment_date | date:'mediumDate' }}</td>
                <td>{{ a.service.name }}</td>
                <td>{{ a.status }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Favorite Stylists -->
      <div class="col-md-4">
        <h5>Favorite Stylists</h5>
        <p *ngIf="!userData.favorite_salons?.length" class="text-muted">No favorite stylists available.</p>
        <div *ngFor="let salon of userData.favorite_salons" class="d-flex align-items-center mb-3">
          <img src="https://via.placeholder.com/40" class="stylist-img me-3" />
          <span>{{ salon.name }}</span>
        </div>
      </div>
    </div>
  </main>
</div>
